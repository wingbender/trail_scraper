!function(e){if("function"==typeof define&&define.amd)define(["dayjs"],e);else if("undefined"!=typeof module)module.exports=e(require("dayjs"));else{if("undefined"==typeof window.dayjs)throw new Error("dayjs must be loaded first");window.WeatherWikiloc=e(window.dayjs)}}(function(e){"use strict";function a(e){if(f.el=document.querySelector("#"+e.id),f.el){if(f.trackId=e.trackId,f.language=e.language,!e.enabled)return void(f.el.innerHTML=n(e.i18n));if(f.el.innerHTML=v(),window.IntersectionObserver){var a=new IntersectionObserver(function(e){e&&e[0].isIntersecting&&(a.unobserve(f.el),s())},{root:null,rootMargin:"0px",threshold:.25});a.observe(f.el)}else s()}}function s(){r(f.trackId,function(e,a){return e?void(f.el.innerHTML=m()):(f.isImperial=a.imperialUnits,a.forecasts.forEach(function(e){d(e),o(e),i(e)}),void(f.el.innerHTML=u(a)))})}function t(){return f.isImperial?" °F":" °C"}function i(e){e.tempMax=Math.round(e.tempMax)+t(),e.tempMin=Math.round(e.tempMin)+t()}function o(a){a.dayOfWeek=e(a.date).locale(f.language).format("dddd")}function d(e){e.class=l(e.icon)}function l(e){switch(e){case"CLEAR":return"meteo-sunny";case"PARTLY_CLOUDY":return"meteo-partly-cloudy";case"CLOUDY":return"meteo-cloudy";case"VERY_CLOUDY":return"meteo-very-cloudy";case"DRIZZLE":return"meteo-drizzle";case"RAIN":return"meteo-rain";case"THUNDERSTORM":return"meteo-thunderstorm";case"SNOW":return"meteo-snow";case"FOG":return"meteo-fog"}}function r(e,a){var s=new XMLHttpRequest;s.open("GET",c+e,!0),s.onload=function(){if(s.status>=200&&s.status<400){var e=JSON.parse(s.responseText);a(null,e)}else a(s.status)},s.send()}var c="/wikiloc/weather.do?spaId=",n=_.template('<div class="meteo-weather-card"><div class="meteo-upgrade"><a href="/premium" style="display: flex" class="meteo-grayscale"><div class="meteo-weather-icon meteo-thunderstorm"></div><div class="meteo-weather-icon meteo-sunny"></div><div class="meteo-weather-icon meteo-snow"></div></a><div class="weather-upgrade-text"><@= getPremium @>. <a href="/premium"><@= learnMore @> &rarr;</a></div></div></div>'),m=_.template('<div class="meteo-weather-card"><div class="weather-unavailable"><div class="meteo-weather-icon meteo-partly-cloudy meteo-grayscale"></div><p class="later">Weather forecast unavailable.<br>Please check back later.</p></div></div>'),v=_.template('<div class="meteo-weather-card"><div class="meteo-current"><div class="location-skel"></div><div class="meteo-weather-data"><div class="meteo-weather-icon-skel"></div><div class="meteo-temprange-skel"></div></div></div><ul class="meteo-forecast"><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li><li class="meteo-day"><div class="meteo-mr-auto"><div class="meteo-day-skel"></div></div><div class="meteo-weather-icon-skel"></div></li></ul></div>'),u=_.template('<div id="meteo-wrapper" class="meteo-wrapper"><div class="meteo-weather-card"><div class="meteo-current"><h6 class="location"><@= location @></h6><div class="meteo-weather-data"><div class="meteo-weather-icon <@= forecasts[0].class @>"></div><div class="meteo-temprange"><div class="meteo-high-today meteo-high"><@= forecasts[0].tempMax @></div><div class="meteo-low-today meteo-low"><@= forecasts[0].tempMin @></div></div></div></div><ul class="meteo-forecast"><@for(var i = 1; i < forecasts.length; i++) {@><li class="meteo-day">        <div class="meteo-mr-auto"> <div class="date"><@=forecasts[i].dayOfWeek@></div> <div class="meteo-temprange"> <span class="meteo-high"><@= forecasts[i].tempMax @></span> / <span class="meteo-low"><@= forecasts[i].tempMin @></span> </div> </div> <div class="meteo-weather-icon <@= forecasts[i].class @>"></div> </li> <@ } @></ul></div></div>'),f={trackId:null,language:"en",isImperial:null,el:null};return{init:a}});