function checkLanguage(){var e=window.location.pathname;if(e.match(/\.do$/)?(e+=window.location.search,$("#lang-selector").find("a").each(function(){$(this).attr("href",$(this).attr("href")+e),$(this).click(function(){setLanguage($(this).attr("id"))})})):$("#lang-selector").find("a").each(function(){var e=$(this).attr("id");$("link[hreflang]").length>0&&($(this).attr("href",$("link[hreflang="+e+"]").attr("href")),$(this).click(function(){setLanguage($(this).attr("id"))}))}),$("#lang-template").length>0){var t=window.location.href.split("/")[2].split(".")[0];"www"==t&&(t="en");var i=(navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage).split("-")[0],a=$.cookie("wikiloc_locale");$(".lang-anchor").prepend(TemplateCache.get("#lang-template")({}));var o=$("#switch_lang_url"),n=$("#switch_lang_lang"),r=$("#language_check"),s=7;if($("#cookie-monster:visible").length>0&&(s=10+$("#cookie-monster").height()),"undefined"!=typeof a&&a!=t&&isSupportedLanguage(a)){var l=$("#"+a);n.text(l.text()),o.text(l.attr("href").substring(0,l.attr("href").indexOf(".com")+4)),o.attr("href",l.attr("href")),r.css("bottom",s+"px").fadeIn("fast")}if("undefined"==typeof a&&i!=t&&isSupportedLanguage(i)){var m=$("#"+i);n.text(m.text()),o.text(m.attr("href").substring(0,m.attr("href").indexOf(".com")+4)),o.attr("href",m.attr("href")),r.css("bottom",s+"px").fadeIn("fast")}$("#switch_lang_cancel").click(function(e){e.preventDefault(),setLanguage(t),r.fadeOut("fast")})}}function isSupportedLanguage(e){return $("#"+e).attr("id")==e}function setLanguage(e){isSupportedLanguage(e)&&$.cookie("wikiloc_locale",e,{path:"/",domain:"wikiloc.com",expires:365})}function translate(key,hash){if(string=eval("translations."+key),string&&hash){var hash_keys=[];for(i in hash)hash.hasOwnProperty(i)&&hash_keys.push(i);for(q in hash_keys){var regex=new RegExp("\\{"+hash_keys[q]+"\\}","gi");string=string.replace(regex,hash[hash_keys[q]].toString())}}return string}function limitText(e,t,i){e.value.length>t&&(e.value=e.value.substring(0,t),alert(i))}function getCDNSubdomain(e){return"s"+e%3}function showPremiumModal(e,t,i,a){var o=$("#premiumModal");i&&o.remove(),o=$("#premiumModal"),0===o.length?WikilocPremiumModal.init({literals:e,selectedFeature:t,showLogin:a},function(e,t){if(e)throw Error("Error loading template");$(document.body).append(t),$("#premiumModal").modal("show"),$("#premium-login-button").click(function(){a()}),$(document.body).on("keyup",function(e){27===e.keyCode&&1===$("#premiumModal").length&&$("#premiumModal").modal("hide")})}):o.modal("show")}function showCreateList(e,t,i,a){var o=$("#premiumModal");i&&o.remove(),o=$("#premiumModal"),0===o.length?WikilocPremiumModal.init({literals:e,selectedFeature:t,showLogin:a},function(e,t){if(e)throw Error("Error loading template");$(document.body).append(t),$("#premiumModal").modal("show"),$("#premium-login-button").click(function(){a()})}):o.modal("show")}function base64ToUint8Array(e){return new Uint8Array(atob(e).split("").map(function(e){return e.charCodeAt(0)}))}window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),_.templateSettings={interpolate:/\<\@\=(.+?)\@\>/gim,evaluate:/\<\@(.+?)\@\>/gim,escape:/\<\@\-(.+?)\@\>/gim},TemplateCache={get:function(e){this.templates||(this.templates={});var t=this.templates[e];return t||(t=$(e).html(),t=_.template(t),this.templates[e]=t),t}},$(document).ready(function(e){if(1!=$.cookie("cookieNotice")&&$("#cookie-monster").show(),$("#acept-cookies").click(function(e){e.preventDefault(),$("#cookie-monster").fadeOut("fast"),$.cookie("cookieNotice",1,{path:"/",domain:"wikiloc.com",expires:365})}),$("#dropalert-info").data("msg")){var t=$("#dropalert-info").data("msg").toString();1!=$.cookie(t)&&$("#dropalert-info").show(),$("#rm-banner-info").click(function(e){e.preventDefault(),$("#dropalert-info").fadeOut("slow"),$.cookie(t,1,{path:"/",domain:"wikiloc.com",expires:30})})}checkLanguage(),$(".messageContainerFade").fadeIn("slow").animate({opacity:1},3e3).fadeOut("slow")});var WikilocPremiumModal=function(){function e(e,a){var o=e.literals,n=e.selectedFeature;return o.showLogin="undefined"!=typeof e.showLogin,void 0===o.freeOption&&(o.freeOption=!1),n?"ADVANCED_FILTER"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/advanced-filter.png":"TRAIL_LIST_SEARCH"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/trail-list.png":"PASSING_AREA"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/passing-area.png":"USER_SEARCH"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/trail-list.png":"GARMIN"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/send-to-garmin.png":"FAVORITE_LIST"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/favorite-list.png":"EXPLORE_PHOTO"===n?o.premiumImage="https://sc.wklcdn.com/wikiloc/assets/styles/images/premium/explore-photo.png":o.premiumImage=t:o.premiumImage=t,a(null,i(o))}var t="https://sc.wklcdn.com/wikiloc/images/apple-touch-icon.png",i=_.template('<div id="premiumModal" class="modal fade" role="dialog"><div class="modal-dialog"><!-- Modal content--><div id="premiumModalContent" class="modal-content"><div class="modal-body"><h1 class="premium-title text-center"><@= premiumFeature @></h1><div id="trial-14-days" class="text-center"><@= trial @></div><hr/><div class="text-center" style="margin-bottom: 25px; margin-top:25px"><@ if(premiumImage) { @><img style="text-align:center; width: 250px; background: white;" src="<@= premiumImage @>"/><@ } else { @><img style="text-align:center; width: 100px;" src="<@= premiumImage @>"/><@ } @></div><div class="text-center"><p class="premium-subtitle"><@= featureName @></p><div class="premium-text"><@= featureDescription @></div><@ if(freeOption) { @><hr><div class="premium-free-option"><@= freeOption @></div><@ } @></div></div><div class="modal-footer"><div class="div-center"><a href="/premium"><button class="btn btn-large premium-button"><@= wikilocPremium @></button></a></div><div class="text-center"><button class="btn btn-large premium-not-now" data-dismiss="modal" aria-label="<@= notNow @>"><@= notNow @></button></div></div><@ if(showLogin) { @><div class="modal-extra-login"><div class="text-center"><button id="premium-login-button" class="btn btn-large"><@= login @></button></div></div><@ } @><div class="clearfix"></div></div></div></div>');return{init:e}}();